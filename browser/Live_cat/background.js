!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=88)}({11:function(t,e,r){"use strict";e.a=t=>new Promise(e=>e(t()))},20:function(t,e,r){"use strict";class n extends Error{constructor(t,e){super(t),this.code=e}}e.a=n},25:function(t,e,r){"use strict";e.a=t=>new Promise(e=>e(t()))},55:function(t,e,r){(function(n){var o,i;void 0===(i="function"==typeof(o=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}var u=function(){function e(){t(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return r(e,[{key:"addEventListener",value:function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var r=this.listeners[t],n=0,o=r.length;n<o;n++)if(r[n]===e)return void r.splice(n,1)}},{key:"dispatchEvent",value:function(t){var e=this;if(t.type in this.listeners){for(var r=function(r){setTimeout((function(){return r.call(e,t)}))},n=this.listeners[t.type],o=0,i=n.length;o<i;o++)r(n[o]);return!t.defaultPrevented}}}]),e}(),c=function(e){function n(){var e;return t(this,n),(e=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?s(t):e}(this,o(n).call(this))).listeners||u.call(s(e)),Object.defineProperty(s(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(s(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(n,e),r(n,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),a(o(n.prototype),"dispatchEvent",this).call(this,t)}}]),n}(u),l=function(){function e(){t(this,e),Object.defineProperty(this,"signal",{value:new c,writable:!0,configurable:!0})}return r(e,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(l.prototype[Symbol.toStringTag]="AbortController",c.prototype[Symbol.toStringTag]="AbortSignal"),function(t){(function(t){return t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof t.Request&&!t.Request.prototype.hasOwnProperty("signal")||!t.AbortController})(t)&&(t.AbortController=l,t.AbortSignal=c)}("undefined"!=typeof self?self:n)})?o.call(e,r,e,t):o)||(t.exports=i)}).call(this,r(56))},56:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},57:function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}class s extends Error{constructor(t){super(s._prepareSuperMessage(t)),this.name="NonError",Error.captureStackTrace&&Error.captureStackTrace(this,s)}static _prepareSuperMessage(t){try{return JSON.stringify(t)}catch(e){return String(t)}}}const a=["name","message","stack","code"],u=(t,e,r)=>{const i=r||(Array.isArray(t)?[]:{});e.push(t);for(var s=0,c=Object.entries(t);s<c.length;s++){const r=n(c[s],2),o=r[0],a=r[1];"function"!=typeof a&&(a&&"object"==typeof a?e.includes(t[o])?i[o]="[Circular]":i[o]=u(t[o],e.slice()):i[o]=a)}var l,f=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=o(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}(a);try{for(f.s();!(l=f.n()).done;){const e=l.value;"string"==typeof t[e]&&(i[e]=t[e])}}catch(t){f.e(t)}finally{f.f()}return i};t.exports={serializeError:t=>"object"==typeof t&&null!==t?u(t,[]):"function"==typeof t?`[Function: ${t.name||"anonymous"}]`:t,deserializeError:t=>{if(t instanceof Error)return t;if("object"==typeof t&&null!==t&&!Array.isArray(t)){const e=new Error;return u(t,[],e),e}return new s(t)}}},88:function(t,e,r){"use strict";r.r(e);var n="URLSearchParams"in self,o="Symbol"in self&&"iterator"in Symbol,i="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in self,a="ArrayBuffer"in self;if(a)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&u.indexOf(Object.prototype.toString.call(t))>-1};function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t&&(t=String(t)),t}function h(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return o&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function d(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function b(t){var e=new FileReader,r=y(e);return e.readAsArrayBuffer(t),r}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&i&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=m(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var t,e,r,n=d(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=y(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(t,e){t=l(t),e=f(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},p.prototype.delete=function(t){delete this.map[l(t)]},p.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},p.prototype.set=function(t,e){this.map[l(t)]=f(e)},p.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},p.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),h(t)},p.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),h(t)},p.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),h(t)},o&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(t,e){var r,n,o=(e=e||{}).body;if(t instanceof g){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),w.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function O(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function _(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},v.call(g.prototype),v.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var E=[301,302,303,307,308];_.redirect=function(t,e){if(-1===E.indexOf(e))throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})};var P=self.DOMException;try{new P}catch(t){(P=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),P.prototype.constructor=P}function j(t,e){return new Promise((function(r,n){var o=new g(t,e);if(o.signal&&o.signal.aborted)return n(new P("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new p,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;r(new _(o,n))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.onabort=function(){n(new P("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),o.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),o.signal&&(o.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",a)}),s.send(void 0===o._bodyInit?null:o._bodyInit)}))}j.polyfill=!0,self.fetch||(self.fetch=j,self.Headers=p,self.Request=g,self.Response=_);r(55);var T=r(20);var A=class{constructor(t){var e,r,n;n=t=>{this.patchLine.push(t),this.idLine.push(this.patchId),this.timeLine.push(Date.now()),this.callClean()},(r="handlePath")in(e=this)?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,this.cleanTimeoutId=null,this.id=Math.trunc(1e3*Math.random()),this.patchLine=[],this.timeLine=[],this.idLine=[],this.index=0,this.tab=t}get patchId(){this.index>1e9&&(this.index=0);let t=-1;for(;-1===t||-1!==this.idLine.indexOf(t);)t=++this.index;return t}get lastPatchId(){return this.idLine[this.idLine.length-1]||null}getDelta(t,e){const r=this.lastPatchId;try{if(t!==this.id)throw new T.a("store id is not equal","ID_IS_NOT_EQUAL");return{id:this.id,patchId:r,type:"patch",result:this.getPatchAfterId(e)}}catch(t){if(-1!==["ID_IS_NOT_EQUAL","PATCH_ID_IS_NOT_FOUND"].indexOf(t.code))return{id:this.id,patchId:r,type:"snapshot",result:this.getSnapshot()};throw t}}getSnapshot(){return this.tab.requests}getPatchAfterId(t){if(this.lastPatchId===t)return[];const e=this.idLine.indexOf(t);if(-1===e)throw new T.a("Patch is is not found","PATCH_ID_IS_NOT_FOUND");return this.patchLine.slice(e+1)}callClean(){null===this.cleanTimeoutId&&(this.cleanTimeoutId=setTimeout(()=>{this.cleanTimeoutId=null,this.clean()},1e3))}clean(){const t=Date.now()-6e4;let e=-1;for(let r=0;r<this.timeLine.length&&this.timeLine[r]<t;r++)e=r;-1!==e&&(this.patchLine.splice(0,e+1),this.idLine.splice(0,e+1),this.timeLine.splice(0,e+1))}reset(){this.patchLine.splice(0),this.idLine.splice(0),this.timeLine.splice(0)}};class I extends Error{constructor(t){super(`Response is not ok ${t.status} (${t.statusText})`),this.name="ErrorFetchResponse",void 0!==t.url&&(this.url=t.url),this.status=t.status}}var S=I;function L(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var C=(t,e)=>{const r=e||{},n=r.responseStatus,o=r.responseOk,i=void 0===o||o,s=r.responseType,a=void 0===s?"text":s,u=R(r,["responseStatus","responseOk","responseType"]),c=new AbortController,l=c.signal,f=fetch(t,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?L(Object(r),!0).forEach((function(e){x(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},u,{signal:l})).then(t=>{if(i&&!t.ok||n&&n!==t.status)throw new S(t);const e=t.headers,r=R(t,["headers"]),o={};return e.forEach((t,e)=>{o[e]=t}),r.headers=o,t[a]().then(t=>({response:r,body:t}))});return f.abort=()=>{c.abort()},f},B=r(9),F=r(25);function U(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const D=r(57).serializeError,N=new Map;chrome.tabs.onCreated.addListener(t=>{const e=t.id;let r=N.get(e);r||N.set(e,r=new q(e)),r.title=t.title}),chrome.tabs.onUpdated.addListener((t,e)=>{if(N.has(t)){if("loading"===e.status){N.get(t).reset()}if(e.title){N.get(t).title=e.title}}}),chrome.tabs.onRemoved.addListener(t=>{N.delete(t)}),chrome.webRequest.onResponseStarted.addListener(t=>{const e=t.url,r=t.method,n=t.type,o=t.statusCode,i=t.responseHeaders,s=t.tabId;if(-1===s)return;if(o<200||o>400||204===o)return;if("GET"!==r)return;let a;for(let t,e=0;t=i[e];e++)if("content-type"===t.name.toLowerCase()){/application\/vnd\.apple\.mpegurl/.test(t.value)&&(a="application/vnd.apple.mpegurl"),/application\/x-mpegURL/.test(t.value)&&(a="application/x-mpegURL");break}if(!a)return;let u=N.get(s);u||N.set(s,u=new q(s)),"main_frame"===n&&(u.url=e),u.addRequest({url:e,mimeType:a,title:u.title})},{urls:["<all_urls>"]},["responseHeaders"]);const k=(t,e)=>{switch(t.action){case"getChanges":return(r={active:!0,currentWindow:!0},new Promise((t,e)=>{chrome.tabs.query(r,r=>{const n=chrome.runtime.lastError;n?e(n):t(r)})})).then(([e])=>{if(e){const r=e.id,n=N.get(r);if(n){const e=t.session,r=e.id,o=e.patchId;return n.patchLine.getDelta(r,o)}}});case"createFetchInstance":{const e=t.url,r=t.options;return Object(B.c)(()=>{const t=C(e,r),n=t.then(({response:t,body:e})=>("arrayBuffer"===r.responseType&&(e=function(t){const e=String.fromCharCode,r=new Uint8Array(t),n=r.byteLength;let o=[];for(let t=0;t<n;t+=1e4){const n=r.subarray(t,t+1e4);o.push(e.apply(null,n))}return o.join("")}(e)),{response:t,body:e}));return n.abort=()=>t.abort(),n},["abort"])}case"instanceInit":{const e=t.options.id;return Object(B.d)(e)}case"instanceCallFn":{const e=t.options,r=e.id,n=e.path,o=e.args;return Object(B.b)(r,n,o)}}var r};chrome.runtime.onMessage.addListener((t,e,r)=>{if(t&&t.action)return Object(F.a)(()=>k(t)).then(t=>{r({result:t})},t=>{r({error:D(t)})}).catch(t=>{console.error("Send response error",t)}),!0});class q{constructor(t){U(this,"urlRequest",new Map),U(this,"requests",[]),U(this,"patchLine",new A(this)),U(this,"title",""),this.id=t}addRequest(t){this.urlRequest.has(t.url)||(this.requests.push(t),this.urlRequest.set(t.url,t),this.patchLine.handlePath({op:"push",value:t}),this.updateBadge())}reset(){this.requests.splice(0),this.urlRequest.clear(),this.patchLine.reset(),this.updateBadge()}updateBadge(){const t=this.requests.length;let e="";t>99?e="99+":t&&(e=""+t),chrome.browserAction.setBadgeText({text:e,tabId:this.id})}}},9:function(t,e,r){"use strict";r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return c})),r.d(e,"b",(function(){return l})),r.d(e,"a",(function(){return f}));var n=r(11);class o extends Error{constructor(t,e){super(t),this.code=e}}var i=o;const s=new Map;let a=0;const u=(t,e=[])=>{a>1e5&&(a=0);let r,n=0;for(;0===n||s.has(n);)n=++a;const o=new Promise(t=>{r=t});return s.set(n,{initFn:t,onInit:r,whenInit:o}),{id:n,methods:e}},c=t=>{const e=p(t);let r=null;try{e.init=e.initFn(),e.onInit()}catch(t){r=t,e.onInit(Promise.reject(new i("call initFn error","CALL_INIT_FN_ERROR")))}if(e.initFn=e.onInit=void 0,Object(n.a)(()=>e.init).then(()=>{s.delete(t)},e=>{s.delete(t)}),r)throw r;return e.init},l=(t,e,r=[])=>{const n=p(t);return n.whenInit.then(()=>{const t=function(t,e){const r=e.split("."),n=r.pop();let o=t;for(;r.length;)o=o[r.shift()];return{scope:o,endPoint:n}}(n.init,e),o=t.scope;return o[t.endPoint].apply(o,r)})},f=(t,e,r=[])=>{t.instanceInit=t.instanceInit||"instanceInit",t.instanceCallFn=t.instanceCallFn||"instanceCallFn";let o=null;const s={id:null,whenInit:new Promise(t=>{o=t})};return s.resultPromise=Object(n.a)(e).then(({id:e,methods:r})=>{s.id=e;const n=t.apiCall(t.instanceInit,{id:e});return n.then(()=>{s.id=null},t=>{s.id=null}),h(s,r,t),o(),n},t=>{throw o(Promise.reject(new i("Init remote instance error","INIT_REMOTE_INSTANCE_ERROR"))),t}),h(s,r,t),s.resultPromise};function h(t,e,r){for(let n,o=0;n=e[o];o++)t.resultPromise[n]=(...e)=>t.whenInit.then(()=>{if(!t.id)throw new i("Instance is done","INSTANCE_DONE");return r.apiCall(r.instanceCallFn,{id:t.id,path:n,args:e})})}function p(t){const e=s.get(t);if(!e)throw new i("Instance is not found","INSTANCE_IS_NOT_FOUND");return e}}});